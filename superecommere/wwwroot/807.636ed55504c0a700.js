"use strict";(self.webpackChunkSuperEcommere=self.webpackChunkSuperEcommere||[]).push([[807],{6807:(Xe,k,m)=>{m.r(k),m.d(k,{PublicModule:()=>Ge});var u=m(4755),f=m(7179);function R(i,r,t,n,l,o,a){try{var c=i[o](a),s=c.value}catch(h){return void t(h)}c.done?r(s):Promise.resolve(s).then(n,l)}function y(i){return function(){var r=this,t=arguments;return new Promise(function(n,l){var o=i.apply(r,t);function a(s){R(o,n,l,a,c,"next",s)}function c(s){R(o,n,l,a,c,"throw",s)}a(void 0)})}}var e=m(9523),d=m(5030),L=m(5656),_=m(5698);class Z{constructor(r,t,n){this.accessToken=r,this.userId=t,this.provider=n}}var p=m(2037),b=m(646),v=m(8860);const N=["googleButton"];function O(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," Email is required "),e.qZA())}function P(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," Password is required "),e.qZA())}function D(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.resendEmailConfirmationLink())}),e._uU(1," Click here to resend email confirmation link in case you didn't receive it "),e.qZA()}}function z(i,r){if(1&i&&(e.TgZ(0,"div",25),e._UZ(1,"app-validation-messages",26),e.YNc(2,D,2,0,"a",27),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("errorMessages",t.errorMessages),e.xp6(1),e.Q6J("ngIf",t.errorMessages[0].includes("Please confirm your email"))}}const q=function(){return["../register"]};let U=(()=>{class i{constructor(t,n,l,o,a,c){this.usersService=t,this.router=n,this.formBuilder=l,this.sharedService=o,this.renderer2=a,this._document=c,this.googleButton=new e.SBq({}),this.loginForm=new d.cw({}),this.submitted=!1,this.errorMessages=[],this.loading=!1,this.usersService.user$.pipe((0,_.q)(1)).subscribe({next:s=>{s&&this.router.navigateByUrl("/")}})}ngOnInit(){this.initializeForm(),this.initializeGoogleButton()}ngAfterViewInit(){const t=this.renderer2.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async="true",t.defer="true",this.renderer2.appendChild(this._document.body,t)}initializeForm(){this.loginForm=this.formBuilder.group({userName:new d.NI("",[d.kI.required]),password:new d.NI("",[d.kI.required])})}loginUser(t){this.submitted=!0,this.errorMessages=[],this.usersService.login(t).subscribe({next:n=>{this.router.navigateByUrl("/")},error:n=>{n.error.errors?this.errorMessages=n.error.errors:this.errorMessages.push(n.error)}})}onSubmit(){this.loginForm.valid&&this.loginUser(this.loginForm.value),this.loading=!0}loginWithFacebook(){var t=this;FB.login(function(){var n=y(function*(l){l.authResponse?t.usersService.loginWithThirdParty(new Z(l.authResponse.accessToken,l.authResponse.userID,"facebook")).subscribe({next:c=>{t.router.navigateByUrl("/")},error:c=>{t.sharedService.showNotification(!1,"Failed",c.error)}}):t.sharedService.showNotification(!1,"Failed","Unable to login with ypur facebook")});return function(l){return n.apply(this,arguments)}}())}resendEmailConfirmationLink(){this.router.navigateByUrl("users/sendEmail/resendemailconfirmationlink")}initializeGoogleButton(){window.onGoogleLibraryLoad=t=>{google.accounts.id.initialize({client_id:"903332559756-m2g1umap0snv9d9e6lbfmpaa518ro4bi.apps.googleusercontent.com",callback:this.googleCallBack.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signin_with",logo_alignment:"center"})}}googleCallBack(t){var n=this;return y(function*(){const l=(0,L.o)(t.credential);n.usersService.loginWithThirdParty(new Z(t.credential,l.sub,"google")).subscribe({next:o=>{n.router.navigateByUrl("/")},error:o=>{n.sharedService.showNotification(!1,"Failed",o.error)}})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(f.F0),e.Y36(d.qu),e.Y36(b.F),e.Y36(e.Qsj),e.Y36(u.K0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],viewQuery:function(t,n){if(1&t&&e.Gf(N,7),2&t){let l;e.iGM(l=e.CRH())&&(n.googleButton=l.first)}},decls:41,vars:10,consts:[[3,"routerLink"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-3"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["formControlName","userName","type","text","placeholder","Email",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["for","password"],["class","form-floating",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"mt-4","text-center"],["routerLink","/sendEmail/forgotpassword",1,"btn","btn-link"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-4"],[1,"col-4","text-center"],[1,"d-flex","justify-content-between","my-3"],["googleButton",""],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-link",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"p"),e._uU(1,"login works!"),e.qZA(),e.TgZ(2,"button",0),e._uU(3," Go To Register Page\n"),e.qZA(),e.TgZ(4,"div",1)(5,"div",2)(6,"main",3)(7,"form",4),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(8,"div",5)(9,"h3",6),e._uU(10,"Login"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"input",8),e.TgZ(13,"label",9),e._uU(14,"Email"),e.qZA(),e.YNc(15,O,2,0,"span",10),e.qZA(),e.TgZ(16,"div",7),e._UZ(17,"input",11),e.TgZ(18,"label",12),e._uU(19,"Password"),e.qZA(),e.YNc(20,P,2,0,"span",10),e.qZA(),e.YNc(21,z,3,2,"div",13),e.TgZ(22,"div",14)(23,"button",15),e._uU(24,"Log in"),e.qZA()()(),e.TgZ(25,"div",16)(26,"a",17)(27,"h6"),e._uU(28,"Forget username or password"),e.qZA()()(),e.TgZ(29,"div",18)(30,"div",19),e._UZ(31,"hr"),e.qZA(),e.TgZ(32,"div",20),e._uU(33,"Or login using"),e.qZA(),e.TgZ(34,"div",19),e._UZ(35,"hr"),e.qZA()(),e.TgZ(36,"div",21),e._UZ(37,"div",null,22),e.TgZ(39,"button",23),e.NdJ("click",function(){return n.loginWithFacebook()}),e._uU(40,"Facebook"),e.qZA()()()()()),2&t){let l,o,a,c;e.xp6(2),e.Q6J("routerLink",e.DdM(9,q)),e.xp6(5),e.Q6J("formGroup",n.loginForm),e.xp6(5),e.ekj("is-invalid",n.submitted&&(null==(l=n.loginForm.get("userName"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(o=n.loginForm.get("userName"))?null:o.hasError("required"))),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(a=n.loginForm.get("password"))?null:a.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(c=n.loginForm.get("password"))?null:c.hasError("required"))),e.xp6(1),e.Q6J("ngIf",n.errorMessages.length>0)}},dependencies:[u.O5,f.rH,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,v.s]}),i})();class B{static passwordMatching(r){const t=r.get("password")?.value,n=r.get("passwordConfirm")?.value;return t===n&&null!==t&&null!==n?null:{passwordNotMatching:!0}}}var g=m(1217);let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),i})(),V=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.BQ,u.ez,g.BQ]}),i})();m(1591);let W=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[W]}),i})(),le=0;const de=new e.OlP("MatError");let oe=(()=>{class i{constructor(t,n){this.id="mat-mdc-error-"+le++,t||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(t){return new(t||i)(e.$8M("aria-live"),e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,n){2&t&&e.Ikx("id",n.id)},inputs:{id:"id"},features:[e._Bn([{provide:de,useExisting:i}])]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.BQ,u.ez,$,g.BQ]}),i})();const ae=["googleButton"];function ce(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," First Name is required "),e.qZA())}function se(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," First Name is required "),e.qZA())}function me(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," Email is required "),e.qZA())}function fe(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," Invalid email address "),e.qZA())}function ue(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," Password is required "),e.qZA())}function pe(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," password must be at least 6 ,and maximum 15 characters "),e.qZA())}function he(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," Password Confirm is required "),e.qZA())}function ge(i,r){1&i&&(e.TgZ(0,"span",24),e._uU(1," password must be at least 6 ,and maximum 15 characters "),e.qZA())}function xe(i,r){if(1&i&&(e.TgZ(0,"div",25),e._UZ(1,"app-validation-messages",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}function _e(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Password not matching"),e.qZA())}let be=(()=>{class i{get email(){return this.form.get("email")}get password(){return this.form.get("password")}get passwordConfirm(){return this.form.get("passwordConfirm")}constructor(t,n,l,o,a,c){this.usersService=t,this.router=n,this.formBuilder=l,this.sharedService=o,this.renderer2=a,this._document=c,this.googleButton=new e.SBq({}),this.title="SuperEcommere",this.submitted=!1,this.errorMessages=[],this.registerForm=new d.cw({}),this.form=new d.cw({email:new d.NI("",[d.kI.required,d.kI.email]),password:new d.NI("",[d.kI.required]),passwordConfirm:new d.NI("",[d.kI.required])},{validators:B.passwordMatching}),this.addUserRequest={id:"",lastName:"",firstName:"",email:"",password:"",username:""},this.heroes=[],this.loading=!1}ngOnInit(){this.initializeGoogleButton(),this.initializeForm()}ngAfterViewInit(){const t=this.renderer2.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async="true",t.defer="true",this.renderer2.appendChild(this._document.body,t)}get f(){return this.form.controls}initializeForm(){this.registerForm=this.formBuilder.group({email:new d.NI("",[d.kI.required,d.kI.pattern("^([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}$")]),firstname:new d.NI("",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(15)]),lastname:new d.NI("",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(15)]),password:new d.NI("",[d.kI.required,d.kI.minLength(6),d.kI.maxLength(15)]),passwordConfirm:new d.NI("",[d.kI.required,d.kI.minLength(6),d.kI.maxLength(15)])})}createUser(t){this.submitted=!0,this.errorMessages=[],this.usersService.register(t).subscribe({next:n=>{this.sharedService.showNotification(!0,n.value.title,n.value.message),this.router.navigateByUrl("/login")},error:n=>{n.error.errors?this.errorMessages=n.error.errors:this.errorMessages.push(n.error)}})}onSubmit(){this.registerForm.valid&&this.createUser(this.registerForm.value),this.loading=!0}registerWithFacebook(){var t=this;FB.login(function(){var n=y(function*(l){if(l.authResponse){const o=l.authResponse.userID,a=l.authResponse.accessToken;console.log(l),t.router.navigateByUrl(`/register/thirdParty/facebook?access_token=${a}&userId=${o}`)}else t.sharedService.showNotification(!1,"Failed","Unable to register with ypur facebook")});return function(l){return n.apply(this,arguments)}}())}initializeGoogleButton(){window.onGoogleLibraryLoad=t=>{google.accounts.id.initialize({client_id:"903332559756-m2g1umap0snv9d9e6lbfmpaa518ro4bi.apps.googleusercontent.com",callback:this.googleCallBack.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signup_with",logo_alignment:"center"})}}googleCallBack(t){var n=this;return y(function*(){const l=(0,L.o)(t.credential);n.router.navigateByUrl(`/register/thirdParty/google?access_token=${t.credential}&userId=${l.sub}`)})()}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(f.F0),e.Y36(d.qu),e.Y36(b.F),e.Y36(e.Qsj),e.Y36(u.K0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register"]],viewQuery:function(t,n){if(1&t&&e.Gf(ae,7),2&t){let l;e.iGM(l=e.CRH())&&(n.googleButton=l.first)}},inputs:{ecomm:"ecomm"},decls:51,vars:21,consts:[[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","placeholder","FirstName","formControlName","firstname",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["type","text","placeholder","LastName","formControlName","lastname",1,"form-control"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],["for","password"],["type","password","placeholder","Password Confirm","formControlName","passwordConfirm",1,"form-control"],["for","passwordConfirm"],["class","form-floating",4,"ngIf"],[4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-4"],[1,"col-4","text-center"],[1,"d-flex","justify-content-between","my-3"],["googleButton",""],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"mat-card-title"),e._uU(4,"Register"),e.qZA(),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"div",4),e._UZ(7,"input",5),e.TgZ(8,"label",6),e._uU(9,"First Name"),e.qZA(),e.YNc(10,ce,2,0,"span",7),e.qZA(),e.TgZ(11,"div",4),e._UZ(12,"input",8),e.TgZ(13,"label",6),e._uU(14,"First Name"),e.qZA(),e.YNc(15,se,2,0,"span",7),e.qZA(),e.TgZ(16,"div",4),e._UZ(17,"input",9),e.TgZ(18,"label",6),e._uU(19,"Email"),e.qZA(),e.YNc(20,me,2,0,"span",7),e.YNc(21,fe,2,0,"span",7),e.qZA(),e.TgZ(22,"div",4),e._UZ(23,"input",10),e.TgZ(24,"label",11),e._uU(25,"Password"),e.qZA(),e.YNc(26,ue,2,0,"span",7),e.YNc(27,pe,2,0,"span",7),e.qZA(),e.TgZ(28,"div",4),e._UZ(29,"input",12),e.TgZ(30,"label",13),e._uU(31,"Password Confirm"),e.qZA(),e.YNc(32,he,2,0,"span",7),e.YNc(33,ge,2,0,"span",7),e.qZA(),e.YNc(34,xe,2,1,"div",14),e.YNc(35,_e,2,0,"mat-error",15),e.TgZ(36,"div",16)(37,"button",17),e._uU(38," Register "),e.qZA()()(),e.TgZ(39,"div",18)(40,"div",19),e._UZ(41,"hr"),e.qZA(),e.TgZ(42,"div",20),e._uU(43,"Or signup using"),e.qZA(),e.TgZ(44,"div",19),e._UZ(45,"hr"),e.qZA()(),e.TgZ(46,"div",21),e._UZ(47,"div",null,22),e.TgZ(49,"button",23),e.NdJ("click",function(){return n.registerWithFacebook()}),e._uU(50,"Facebook"),e.qZA()()()()()),2&t){let l,o,a,c,s,h,F,A,E,w,C,S,M;e.xp6(5),e.Q6J("formGroup",n.registerForm),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(l=n.registerForm.get("firstname"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(o=n.registerForm.get("firstname"))?null:o.hasError("required"))),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(a=n.registerForm.get("lastname"))?null:a.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(c=n.registerForm.get("lastname"))?null:c.hasError("required"))),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(s=n.registerForm.get("email"))?null:s.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(h=n.registerForm.get("email"))?null:h.hasError("required"))),e.xp6(1),e.Q6J("ngIf",n.submitted&&(null==(F=n.registerForm.get("email"))?null:F.hasError("pattern"))),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(A=n.registerForm.get("password"))?null:A.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(E=n.registerForm.get("password"))?null:E.hasError("required"))),e.xp6(1),e.Q6J("ngIf",n.submitted&&(null==(w=n.registerForm.get("password"))?null:w.hasError("minLength"))&&(null==(w=n.registerForm.get("password"))?null:w.hasError("maxLength"))),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(C=n.registerForm.get("passwordConfirm"))?null:C.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(S=n.registerForm.get("passwordConfirm"))?null:S.hasError("required"))),e.xp6(1),e.Q6J("ngIf",n.submitted&&(null==(M=n.registerForm.get("passwordConfirm"))?null:M.hasError("minlength"))&&(null==(M=n.registerForm.get("passwordConfirm"))?null:M.hasError("maxlength"))),e.xp6(1),e.Q6J("ngIf",n.errorMessages.length>0),e.xp6(1),e.Q6J("ngIf",n.passwordConfirm.touched&&n.registerForm.hasError("passwordNotMatching"))}},dependencies:[u.O5,T,oe,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,v.s],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;min-width:350px}.login[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:300px}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),i})();function ve(i,r){1&i&&(e.TgZ(0,"div",1)(1,"a",2),e._uU(2," Login "),e.qZA()())}function we(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"a",3),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.resendEmailConfirmationLink())}),e._uU(2," Click here to resend emaul confirm link "),e.qZA()()}}let ye=(()=>{class i{constructor(t,n,l,o){this.userService=t,this.sharedService=n,this.router=l,this.activatedRoute=o,this.success=!0}ngOnInit(){this.userService.user$.pipe((0,_.q)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:n=>{const l={token:n.get("token"),email:n.get("email")};this.userService.confirmEmail(l).subscribe({next:o=>{this.sharedService.showNotification(!0,o.value.title,o.value.message)},error:o=>{this.success=!1,this.sharedService.showNotification(!1,"falild",o.error)}})}})}})}resendEmailConfirmationLink(){this.router.navigateByUrl("users/sendEmail/resendemailconfirmationlink")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(b.F),e.Y36(f.F0),e.Y36(f.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-confirm-email"]],decls:2,vars:2,consts:[["class","container text center",4,"ngIf"],[1,"container","text","center"],["routerLink","/login",1,"btn","btn-primary"],[1,"btn","btn-link",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,ve,3,0,"div",0),e.YNc(1,we,3,0,"div",0)),2&t&&(e.Q6J("ngIf",n.success),e.xp6(1),e.Q6J("ngIf",!n.success))},dependencies:[u.O5,f.rH]}),i})();function Fe(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," Resend email confirmation link "),e.qZA())}function Ce(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," Retrieve your password "),e.qZA())}function Me(i,r){1&i&&(e.TgZ(0,"span",18),e._uU(1," Email is required "),e.qZA())}function Te(i,r){1&i&&(e.TgZ(0,"span",18),e._uU(1," Invalid email address "),e.qZA())}function Ie(i,r){if(1&i&&(e.TgZ(0,"div",19),e._UZ(1,"app-validation-messages",20),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}function Ae(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSubmit())}),e.TgZ(4,"div",5)(5,"h1",6),e.YNc(6,Fe,2,0,"span",7),e.YNc(7,Ce,2,0,"span",7),e.qZA(),e.TgZ(8,"div",8),e._UZ(9,"input",9),e.TgZ(10,"label",10),e._uU(11,"Email"),e.qZA(),e.YNc(12,Me,2,0,"span",11),e.YNc(13,Te,2,0,"span",11),e.qZA()(),e.YNc(14,Ie,2,1,"div",12),e.TgZ(15,"div",13)(16,"div",14)(17,"div",15)(18,"button",16),e._uU(19," Send "),e.qZA()()(),e.TgZ(20,"div",14)(21,"div",15)(22,"button",17),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.cancel())}),e._uU(23," Cancel "),e.qZA()()()()()()()()}if(2&i){const t=e.oxw();let n,l,o;e.xp6(3),e.Q6J("formGroup",t.emailForm),e.xp6(3),e.Q6J("ngIf",t.mode.includes("resendemailconfirmationlink")),e.xp6(1),e.Q6J("ngIf",t.mode.includes("forgotpassword")),e.xp6(2),e.ekj("is-invalid",t.submitted&&(null==(n=t.emailForm.get("email"))?null:n.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(l=t.emailForm.get("email"))?null:l.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(o=t.emailForm.get("email"))?null:o.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0)}}let Ee=(()=>{class i{constructor(t,n,l,o,a){this.userService=t,this.sharedService=n,this.formBuilder=l,this.router=o,this.activatedRoute=a,this.emailForm=new d.cw({}),this.submitted=!1,this.errorMessages=[],this.loading=!1}ngOnInit(){this.userService.user$.pipe((0,_.q)(1)).subscribe({next:t=>{if(t)this.router.navigateByUrl("/");else{const n=this.activatedRoute.snapshot.paramMap.get("mode");n&&(this.mode=n,console.log(this.mode),this.initializeForm())}}})}initializeForm(){this.emailForm=this.formBuilder.group({email:["",[d.kI.required,d.kI.pattern("^([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}$")]]})}sendEmail(t){this.submitted=!0,this.errorMessages=[],this.mode?.includes("resendemailconfirmationlink")?this.userService.resendEmailConfirmationLink(this.emailForm.get("email")?.value).subscribe({next:n=>{this.sharedService.showNotification(!0,n.value.title,n.value.message),this.router.navigateByUrl("/login")},error:n=>{n.error.errors?this.errorMessages=n.error.errors:this.errorMessages.push(n.error)}}):this.mode?.includes("forgotpassword")&&this.userService.forgetPassword(this.emailForm.get("email")?.value).subscribe({next:n=>{this.sharedService.showNotification(!0,n.value.title,n.value.message),this.router.navigateByUrl("/login")},error:n=>{n.error.errors?this.errorMessages=n.error.errors:this.errorMessages.push(n.error)}})}onSubmit(){this.emailForm.valid&&this.mode&&this.sendEmail(this.emailForm.value),this.loading=!0}cancel(){this.router.navigateByUrl("/login")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(b.F),e.Y36(d.qu),e.Y36(f.F0),e.Y36(f.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-send-email"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[4,"ngIf"],[1,"form-floating","mb-3"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["class","form-floating",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","submit",1,"btn","btn-block","btn-danger",3,"click"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"]],template:function(t,n){1&t&&e.YNc(0,Ae,24,8,"div",0),2&t&&e.Q6J("ngIf",n.mode)},dependencies:[u.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,v.s]}),i})();function Se(i,r){1&i&&(e.TgZ(0,"span",21),e._uU(1," Password is required "),e.qZA())}function ke(i,r){1&i&&(e.TgZ(0,"span",21),e._uU(1," password must be at least 6 ,and maximum 15 characters "),e.qZA())}function Re(i,r){1&i&&(e.TgZ(0,"span",21),e._uU(1," Password Confirm is required "),e.qZA())}function Le(i,r){1&i&&(e.TgZ(0,"span",21),e._uU(1," password must be at least 6 ,and maximum 15 characters "),e.qZA())}function Ze(i,r){if(1&i&&(e.TgZ(0,"div",22),e._UZ(1,"app-validation-messages",23),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}function Ne(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSubmit())}),e.TgZ(4,"div",5)(5,"h1",6),e._uU(6," Change your password "),e.qZA(),e.TgZ(7,"div",7),e._UZ(8,"input",8),e.TgZ(9,"label",9),e._uU(10,"Email"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"input",10),e.TgZ(13,"label",11),e._uU(14,"Password"),e.qZA(),e.YNc(15,Se,2,0,"span",12),e.YNc(16,ke,2,0,"span",12),e.qZA(),e.TgZ(17,"div",7),e._UZ(18,"input",13),e.TgZ(19,"label",14),e._uU(20,"Password Confirm"),e.qZA(),e.YNc(21,Re,2,0,"span",12),e.YNc(22,Le,2,0,"span",12),e.qZA()(),e.YNc(23,Ze,2,1,"div",15),e.TgZ(24,"div",16)(25,"div",17)(26,"div",18)(27,"button",19),e._uU(28," Change Password "),e.qZA()()(),e.TgZ(29,"div",17)(30,"div",18)(31,"button",20),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.cancel())}),e._uU(32," Cancel "),e.qZA()()()()()()()()}if(2&i){const t=e.oxw();let n,l,o,a,c,s;e.xp6(3),e.Q6J("formGroup",t.resetPasswordForm),e.xp6(9),e.ekj("is-invalid",t.submitted&&(null==(n=t.resetPasswordForm.get("newPassword"))?null:n.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(l=t.resetPasswordForm.get("newPassword"))?null:l.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(o=t.resetPasswordForm.get("newPassword"))?null:o.hasError("minLength"))||(null==(o=t.resetPasswordForm.get("newPassword"))?null:o.hasError("maxLength"))),e.xp6(2),e.ekj("is-invalid",t.submitted&&(null==(a=t.resetPasswordForm.get("newPasswordConfirm"))?null:a.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(c=t.resetPasswordForm.get("newPasswordConfirm"))?null:c.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(s=t.resetPasswordForm.get("newPasswordConfirm"))?null:s.hasError("minlength"))||(null==(s=t.resetPasswordForm.get("newPasswordConfirm"))?null:s.hasError("maxlength"))),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0)}}let Oe=(()=>{class i{constructor(t,n,l,o,a){this.userService=t,this.sharedService=n,this.formBuilder=l,this.router=o,this.activatedRoute=a,this.resetPasswordForm=new d.cw({}),this.submitted=!1,this.errorMessages=[],this.loading=!1}ngOnInit(){this.userService.user$.pipe((0,_.q)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:n=>{this.token=n.get("token"),this.email=n.get("email"),this.token&&this.email?this.initializeForm(this.email):this.router.navigateByUrl("/login")}})}})}initializeForm(t){this.resetPasswordForm=this.formBuilder.group({email:[{value:t,disabled:!0}],newPassword:["",[d.kI.required,d.kI.minLength(6),d.kI.maxLength(15)]],newPasswordConfirm:["",[d.kI.required,d.kI.minLength(6),d.kI.maxLength(15)]]})}resetPassword(){if(this.submitted=!0,this.errorMessages=[],this.token&&this.email){const t={token:this.token,email:this.email,newPassword:this.resetPasswordForm.get("newPassword")?.value};this.userService.resetPassword(t).subscribe({next:n=>{this.sharedService.showNotification(!0,n.value.title,n.value.message),this.router.navigateByUrl("/login")},error:n=>{n.error.errors?this.errorMessages=n.error.errors:this.errorMessages.push(n.error)}})}}onSubmit(){this.resetPasswordForm.valid&&this.resetPassword(),this.loading=!0}cancel(){this.router.navigateByUrl("/login")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(b.F),e.Y36(d.qu),e.Y36(f.F0),e.Y36(f.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reset-password"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["for","email"],["type","password","placeholder","New Password","formControlName","newPassword",1,"form-control"],["for","newPassword"],["class","text-danger",4,"ngIf"],["type","password","placeholder","New Password Confirm","formControlName","newPasswordConfirm",1,"form-control"],["for","newPasswordConfirm"],["class","form-floating",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","submit",1,"btn","btn-block","btn-danger",3,"click"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"]],template:function(t,n){1&t&&e.YNc(0,Ne,33,10,"div",0),2&t&&e.Q6J("ngIf",n.token&&n.email)},dependencies:[u.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,v.s]}),i})();class Pe{constructor(r,t,n,l,o){this.firstName=r,this.lastName=t,this.userId=n,this.accessToken=l,this.provider=o}}function De(i,r){1&i&&(e.TgZ(0,"span",3),e._uU(1," First Name is required "),e.qZA())}function ze(i,r){1&i&&(e.TgZ(0,"span",3),e._uU(1," First Name is required "),e.qZA())}function qe(i,r){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"app-validation-messages",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}const Ue=[{path:"",component:(()=>{class i{constructor(t){this.userServies=t,this.title="SuperEcommere",this.users=[]}ngOnInit(){this.userServies.getUsers().subscribe(t=>{this.users=t,console.log(this.users)})}updateEcommList(t){this.users=t}editUser(t){this.userToEdit=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"text-center"],[1,"text-warning"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Welcome to "),e.TgZ(3,"span",1),e._uU(4,"super ecommerce"),e.qZA()()())}}),i})()},{path:"login",component:U},{path:"register",component:be},{path:"users/confirmEmail",component:ye},{path:"sendEmail/:mode",component:Ee},{path:"users/resetPassword",component:Oe},{path:"register/thirdParty/:provider",component:(()=>{class i{constructor(t,n,l,o){this.usersService=t,this.router=n,this.formBuilder=l,this.ActivatedRoute=o,this.submitted=!1,this.errorMessages=[],this.registerForm=new d.cw({}),this.provider=null,this.access_token=null,this.userId=null}ngOnInit(){console.log(this.ActivatedRoute.queryParamMap),this.usersService.user$.pipe((0,_.q)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.ActivatedRoute.queryParamMap.subscribe({next:n=>{console.log(n),this.provider=this.ActivatedRoute.snapshot.paramMap.get("provider"),this.access_token=n.get("access_token"),this.userId=n.get("userId"),this.provider&&this.access_token&&this.userId&&("facebook"===this.provider||"google"===this.provider)?this.initializeForm():this.router.navigateByUrl("/register")}})}})}initializeForm(){this.registerForm=this.formBuilder.group({firstName:new d.NI("",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(15)]),lastName:new d.NI("",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(15)])})}createUser(t){if(this.submitted=!0,this.errorMessages=[],this.userId&&this.access_token&&this.provider){const n=this.registerForm.get("firstName")?.value,l=this.registerForm.get("lastName")?.value,o=new Pe(n,l,this.userId,this.access_token,this.provider);this.usersService.registerWithThirdParty(o).subscribe({next:a=>{this.router.navigateByUrl("/")},error:a=>{a.error.errors?this.errorMessages=a.error.errors:this.errorMessages.push(a.error)}})}}onSubmit(){this.registerForm.valid&&this.createUser(this.registerForm.value)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(f.F0),e.Y36(d.qu),e.Y36(f.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register-with-third-party"]],decls:23,vars:11,consts:[[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],[1,"text-danger"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","placeholder","FirstName","formControlName","firstName",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["type","text","placeholder","LastName","formControlName","lastName",1,"form-control"],["class","form-floating",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"form-floating"],[3,"errorMessages"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"mat-card-title"),e._uU(4,"Creating an account using your "),e.TgZ(5,"span",3),e._uU(6),e.ALo(7,"titlecase"),e.qZA()(),e.TgZ(8,"form",4),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(9,"div",5),e._UZ(10,"input",6),e.TgZ(11,"label",7),e._uU(12,"First Name"),e.qZA(),e.YNc(13,De,2,0,"span",8),e.qZA(),e.TgZ(14,"div",5),e._UZ(15,"input",9),e.TgZ(16,"label",7),e._uU(17,"First Name"),e.qZA(),e.YNc(18,ze,2,0,"span",8),e.qZA(),e.YNc(19,qe,2,1,"div",10),e.TgZ(20,"div",11)(21,"button",12),e._uU(22," Register "),e.qZA()()()()()()),2&t){let l,o,a,c;e.xp6(6),e.Oqu(e.lcZ(7,9,n.provider)),e.xp6(2),e.Q6J("formGroup",n.registerForm),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(l=n.registerForm.get("firstName"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(o=n.registerForm.get("firstName"))?null:o.hasError("required"))),e.xp6(2),e.ekj("is-invalid",n.submitted&&(null==(a=n.registerForm.get("lastName"))?null:a.errors)),e.xp6(3),e.Q6J("ngIf",n.submitted&&(null==(c=n.registerForm.get("lastName"))?null:c.hasError("required"))),e.xp6(1),e.Q6J("ngIf",n.errorMessages.length>0)}},dependencies:[u.O5,T,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,v.s,u.rS]}),i})()}];let Be=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.Bz.forChild(Ue),f.Bz]}),i})(),Ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),je=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.BQ,I,I,Ye,g.BQ]}),i})();var Qe=m(1728),Je=m(4466);let Ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,Be,V,I,Qe.ot,je,Je.m]}),i})()}}]);